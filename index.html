<html>
<head>
	<meta charset="utf-8">
	<style>
	#bingo-table {
		border-collapse: collapse;
		cursor: pointer;
	}
	#bingo-table td {
		border: solid thin;
		width: 5em;
		height: 5em;
	}
	#bingo-table .clear-cell {
		background-color: white;
	}
	#bingo-table .clear-cell:hover {
		background-color: #fdfafa;
	}
	#bingo-table .check-cell {
		background-color: cyan;
	}
	#bingo-table .bingo-cell {
		background-color: yellow;
	}
	#bingo-table textarea {
		background-color: inherit;
		border: none;
		resize: none;
		width: inherit;
		height: inherit;
		font-family: sans-serif;
	}
	#bingo-table caption {
		cursor: default;
	}
	#bingo-table .caption-text {
		color: black;
		font-size: 24px;
		text-align: center;
		padding-top: 12px;
		padding-bottom: 6px;
	}
	#bingo-table .caption-text:hover {
		background-color: #fdfafa;
		color: #10a0f0;
	}
	#bingo-table .edit-mode-off {
		cursor: pointer;
		caret-color: transparent;
	}
	#bingo-table .edit-mode-on {
		background-color: white;
		cursor: text;
	}
	</style>
	<script src="bingo.js"></script>
	<script>

	function cellClass(cell) {
		if(cell.data.bingo > 0) {
			return 'bingo-cell';
		}
		return cell.data.checked ?
			'check-cell' :
			'clear-cell';
	}

	const board = Board();

	window.onload = () => {
		console.log(localStorage);

		let boardTable = makeBoardTable(board, {
			tableDidAppendCell: (cell) => {
				cell.className = cellClass(cell);
				cell.textarea.className = 'edit-mode-off';
			},
			didCreateTable: (table) => {
				table.model.captionTextarea.className = 'caption-text';
				table.model.captionTextarea.rows = 1;
			},
			didChangeLabel: (board) => {
				console.log("Changed label to " + board.label);
			},
			cellDidEnterEditMode: (cell) => {
				cell.textarea.className = 'edit-mode-on';
			},
			cellDidExitEditMode: (cell) => {
				cell.textarea.className = 'edit-mode-off';
			},
			cellDidToggle: () => {
				boardTable.model.cells
					.forEach((cell) => {
						cell.className = cellClass(cell);
					});
			},
		});
		document.getElementById('span01')
			.appendChild(boardTable);
		boardTable.id = 'bingo-table';

		board.connectLabelTextarea(
			document.getElementById('label-pair'));
	}

	</script>
</head>
<body>
	<span id="span01"></span>

	<style>
		#clear-local-storage {
			background-color: red;
			color: yellow;
			padding: 3px;
			cursor: pointer;
		}
		#clear-local-storage:hover {
			background-color: #ff3f00;
		}
	</style>


	<textarea id="label-pair"></textarea>
	<p id="clear-local-storage">clear localStorage</p>

	<script>

	document.getElementById('clear-local-storage').onclick = () => {
		localStorage.clear();
	};

	</script>

	<p>Finished loading</p>
</body>
</html>
